(this["webpackJsonpmesto-react.js"]=this["webpackJsonpmesto-react.js"]||[]).push([[0],{15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),c=n(6),s=n.n(c),r=(n(15),n(9)),i=n(2),u=n.p+"static/media/logo.c2821b38.svg",l=n(0);var p=function(e){return Object(l.jsx)("header",{className:"header",children:Object(l.jsx)("img",{src:u,className:"logo",alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f Mesto"})})},d=n(10),m=o.a.createContext();var b=function(e){var t=o.a.useContext(m),n=e.owner._id===t._id,a=e.likes.some((function(e){return e._id===t._id})),c="button button_type_like opacity ".concat(a?"button_type_like_active":""),s="button button_type_delete-card ".concat(n?"button_type_delete-card-visible":"button_type_delete-card-hidden");return Object(l.jsxs)("li",{className:"card",children:[Object(l.jsx)("img",{className:"card__image",alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 ".concat(e.name),src:e.link,onClick:function(){e.onCardClick(e)}}),Object(l.jsxs)("div",{className:"card__content",children:[Object(l.jsx)("h2",{className:"card__title",children:e.name}),Object(l.jsxs)("div",{className:"card__like-block",children:[Object(l.jsx)("button",{className:c,"aria-label":"\u041d\u0440\u0430\u0432\u0438\u0442\u044c\u0441\u044f",type:"button",onClick:function(){e.onCardLike(e)}}),Object(l.jsx)("p",{className:"card__like-count",children:e.likes.length})]})]}),Object(l.jsx)("button",{className:s,onClick:function(){console.log(e),e.onConfirmClick(e)}})]})};var j=function(e){var t=o.a.useContext(m);return Object(l.jsxs)("main",{className:"main",children:[Object(l.jsxs)("section",{className:"profile",children:[Object(l.jsxs)("div",{className:"profile__avatar-block",children:[Object(l.jsx)("img",{src:t.avatar,className:"profile__avatar",alt:"\u0410\u0432\u0430\u0442\u0430\u0440"}),Object(l.jsx)("button",{className:"button button_type_edite-avatar opacity","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",type:"button",onClick:e.onEditAvatar})]}),Object(l.jsxs)("div",{className:"profile__info",children:[Object(l.jsxs)("div",{className:"profile__full-name-wraper",children:[Object(l.jsx)("h1",{className:"profile__full-name",children:t.name}),Object(l.jsx)("button",{className:"button button_type_edite-profile opacity","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",type:"button",onClick:e.onEditProfile})]}),Object(l.jsx)("p",{className:"profile__occupation",children:t.about})]}),Object(l.jsx)("button",{className:"button button_type_add-card opacity","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443",type:"button",onClick:e.onAddPlace})]}),Object(l.jsx)("section",{className:"cards",children:Object(l.jsx)("ul",{className:"cards__block",children:e.cards.map((function(t){return Object(l.jsx)(b,Object(d.a)({onConfirmClick:e.onConfirmClick,onCardLike:e.onCardLike,onCardClick:e.onCardClick},t),t._id)}))})})]})};var _=function(){return Object(l.jsx)("footer",{className:"footer",children:Object(l.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Mesto Russia"})})};var h=function(e){var t=e.card;return Object(l.jsx)("div",{className:"popup popup_image ".concat(e.isOpen?"popup_opened":""),role:"dialog",children:Object(l.jsxs)("div",{className:"popup__image-container",children:[Object(l.jsx)("button",{className:"button button_type_close opacity","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",type:"button",onClick:e.onClose}),Object(l.jsx)("img",{className:"popup__image",alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 ".concat(t.name),src:t.link}),Object(l.jsx)("h2",{className:"popup__image-title",children:t.name})]})})};var f=function(e){return Object(l.jsx)("div",{className:"popup popup__".concat(e.name," ").concat(e.isOpen?"popup_opened":""),role:"dialog",children:Object(l.jsxs)("div",{className:"popup__container",children:[Object(l.jsx)("button",{className:"button button_type_close opacity","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",type:"button",onClick:e.onClose}),Object(l.jsx)("h2",{className:"popup__title",children:e.title}),Object(l.jsxs)("form",{className:"popup__form popup__form_add-new-card",method:"POST",name:e.name,onSubmit:e.onSubmit,children:[e.children,Object(l.jsx)("button",{type:"submit",className:"button popup__button button_type_submit opacity",children:e.buttonName})]})]})})};var v=function(e){var t=o.a.useState(),n=Object(i.a)(t,2),a=n[0],c=n[1],s=o.a.useState(),r=Object(i.a)(s,2),u=r[0],p=r[1],d=o.a.useContext(m);return o.a.useEffect((function(){c(d.name),p(d.about)}),[d]),Object(l.jsxs)(f,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",buttonName:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",name:"profile",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:a,about:u})},children:[Object(l.jsx)("input",{type:"text",className:"popup__input popup__input_full-name",name:"name",placeholder:"\u0424\u0418\u041e",required:!0,minLength:"2",maxLength:"20",id:"full-name",value:a,onChange:function(e){c(e.target.value)}}),Object(l.jsx)("span",{id:"full-name-error",className:"popup__error"}),Object(l.jsx)("input",{type:"text",className:"popup__input popup__input_occupation",name:"occupation",placeholder:"\u0420\u043e\u0434 \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438",required:!0,minLength:"2",maxLength:"200",id:"occupation",value:u,onChange:function(e){p(e.target.value)}}),Object(l.jsx)("span",{id:"occupation-error",className:"popup__error"})]})};var O=function(e){var t=o.a.useRef();return Object(l.jsxs)(f,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",buttonName:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",name:"avatar",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(n){n.preventDefault(),e.onUpdateAvatar({avatar:t.current.value}),setTimeout((function(){t.current.value=""}),700)},children:[Object(l.jsx)("input",{ref:t,type:"url",className:"popup__input popup__input_avatar-link",name:"avatar",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,id:"avatar"}),Object(l.jsx)("span",{id:"avatar-error",className:"popup__error"})]})};var x=function(e){var t=o.a.useState(),n=Object(i.a)(t,2),a=n[0],c=n[1],s=o.a.useState(),r=Object(i.a)(s,2),u=r[0],p=r[1];return Object(l.jsxs)(f,{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",buttonName:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",name:"card",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onAddPlace({name:a,link:u}),setTimeout((function(){c(""),p("")}),700)},children:[Object(l.jsx)("input",{value:a,onChange:function(e){c(e.target.value)},type:"text",className:"popup__input popup__input_image-title",name:"image-title",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,minLength:"2",maxLength:"30",id:"image-title"}),Object(l.jsx)("span",{id:"image-title-error",className:"popup__error"}),Object(l.jsx)("input",{value:u,onChange:function(e){p(e.target.value)},type:"url",className:"popup__input popup__input_image-link",name:"image-link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,id:"image-link"}),Object(l.jsx)("span",{id:"image-link-error",className:"popup__error"})]})};var g=function(e){return Object(l.jsx)(f,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonName:"\u0414\u0430",name:"confirm",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onConfirm(e)}})},C=n(7),k=n(8),N=new(function(){function e(t){var n=t.url,a=t.headers;Object(C.a)(this,e),this._url=n,this._headers=a}return Object(k.a)(e,[{key:"getCards",value:function(){var e=this;return fetch("".concat(this._url,"/cards"),{headers:this._headers}).then((function(t){return e._getResponseData({result:t})}))}},{key:"addCard",value:function(e){var t=this,n=e.name,a=e.link;return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:n,link:a})}).then((function(e){return t._getResponseData({result:e})}))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._url,"/users/me"),{headers:this._headers}).then((function(t){return e._getResponseData({result:t})}))}},{key:"setUserInfo",value:function(e){var t=this,n=e.name,a=e.about;return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:n,about:a})}).then((function(e){return t._getResponseData({result:e})}))}},{key:"setUserAvatar",value:function(e){var t=this,n=e.avatar;return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:n})}).then((function(e){return t._getResponseData({result:e})}))}},{key:"deleteCard",value:function(e){var t=this,n=e.cardId;return fetch("".concat(this._url,"/cards/").concat(n),{method:"DELETE",headers:this._headers}).then((function(e){return t._getResponseData({result:e})}))}},{key:"changeLikeCardStatus",value:function(e){var t=this,n=e.cardId,a=e.isLiked;return fetch("".concat(this._url,"/cards/likes/").concat(n),{method:a?"PUT":"DELETE",headers:this._headers}).then((function(e){return t._getResponseData({result:e})}))}},{key:"_getResponseData",value:function(e){var t=e.result;return t.ok?t.json():Promise.reject(new Error("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(t.status)))}}]),e}())({url:"https://mesto.nomoreparties.co/v1/cohort-19",headers:{authorization:"a2645d68-6dae-4ace-a29b-319c06bb5839","Content-Type":"application/json"}});var y=function(){var e=o.a.useState(!1),t=Object(i.a)(e,2),n=t[0],a=t[1],c=o.a.useState(!1),s=Object(i.a)(c,2),u=s[0],d=s[1],b=o.a.useState(!1),f=Object(i.a)(b,2),C=f[0],k=f[1],y=o.a.useState(!1),S=Object(i.a)(y,2),P=S[0],L=S[1],D=o.a.useState(!1),E=Object(i.a)(D,2),T=E[0],U=E[1],A=o.a.useState({}),R=Object(i.a)(A,2),I=R[0],w=R[1],q=o.a.useState([]),J=Object(i.a)(q,2),F=J[0],M=J[1],B=o.a.useState(m),H=Object(i.a)(B,2),z=H[0],G=H[1];function K(){a(!1),d(!1),k(!1),L(!1),setTimeout((function(){w({})}),500)}return o.a.useEffect((function(){Promise.resolve(N.getUserInfo()).then((function(e){G(e)}))}),[]),o.a.useEffect((function(){Promise.resolve(N.getCards()).then((function(e){M(e)})).catch((function(e){return console.log(e)}))}),[]),Object(l.jsx)(m.Provider,{value:z,children:Object(l.jsxs)("div",{className:"body",children:[Object(l.jsxs)("div",{className:"root",children:[Object(l.jsx)(p,{}),Object(l.jsx)(j,{onEditProfile:function(){a(!0)},onEditAvatar:function(){k(!0)},onConfirmClick:function(){U(!0)},onAddPlace:function(){d(!0)},onCardClick:function(e){w(e),L(!0)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===z._id}));Promise.resolve(N.changeLikeCardStatus({cardId:e._id,isLiked:!t})).then((function(t){var n=F.map((function(n){return n._id===e._id?t:n}));M(n)})).catch((function(e){return console.log(e)}))},cards:F}),Object(l.jsx)(_,{})]}),Object(l.jsx)(x,{isOpen:u,onClose:K,onAddPlace:function(e){var t=e.name,n=e.link;Promise.resolve(N.addCard({name:t,link:n})).then((function(e){M([e].concat(Object(r.a)(F))),K()})).catch((function(e){return console.log(e)}))}}),Object(l.jsx)(O,{isOpen:C,onClose:K,onUpdateAvatar:function(e){var t=e.avatar;Promise.resolve(N.setUserAvatar({avatar:t})).then((function(e){G(e),K()})).catch((function(e){return console.log(e)}))}}),Object(l.jsx)(v,{isOpen:n,onClose:K,onUpdateUser:function(e){var t=e.name,n=e.about;Promise.resolve(N.setUserInfo({name:t,about:n})).then((function(e){G(e),K()})).catch((function(e){return console.log(e)}))}}),Object(l.jsx)(h,{card:I,isOpen:P,onClose:K}),Object(l.jsx)(g,{isOpen:T,onClose:K,onConfirm:function(e){console.log(e)}})]})})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),o(e),c(e),s(e)}))};s.a.render(Object(l.jsx)(o.a.StrictMode,{children:Object(l.jsx)(y,{})}),document.getElementById("root")),S()}},[[17,1,2]]]);
//# sourceMappingURL=main.07abd80e.chunk.js.map